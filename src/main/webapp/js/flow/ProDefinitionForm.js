var ProDefinitionForm=function(a,c){this.defId=a;this.typeId=c;var b=this.setup();var d=new Ext.Window({id:"ProDefinitionFormWin",title:"流程定义详细信息",iconCls:"menu-flowNew",width:500,height:420,modal:true,layout:"anchor",plain:true,bodyStyle:"padding:5px;",buttonAlign:"center",items:[this.setup()],buttons:[{text:"保存",iconCls:"btn-save",handler:function(){var e=Ext.getCmp("ProDefinitionForm");if(e.getForm().isValid()){e.getForm().submit({method:"post",waitMsg:"正在提交数据...",success:function(f,g){Ext.ux.Toast.msg("操作信息","成功信息保存！");Ext.getCmp("ProDefinitionGrid").getStore().reload();d.close();},failure:function(f,g){Ext.MessageBox.show({title:"操作信息",msg:"信息保存出错，请联系管理员！",buttons:Ext.MessageBox.OK,icon:"ext-mb-error"});}});}}},{iconCls:"btn-cancel",text:"取消",handler:function(){d.close();}}]});d.show();};ProDefinitionForm.prototype.setup=function(){var e=this.typeId;var d=__ctxPath+"/flow/listProType.do";var c=new TreeSelector("proTypeTreeSelector",d,"流程分类","proTypeId");var b=new Ext.FormPanel({url:__ctxPath+"/flow/saveProDefinition.do",layout:"form",id:"ProDefinitionForm",frame:true,defaults:{widht:400,anchor:"100%,100%"},formId:"ProDefinitionFormId",defaultType:"textfield",items:[{name:"proDefinition.defId",xtype:"hidden",value:this.defId==null?"":this.defId},c,{xtype:"hidden",id:"proTypeId",name:"proDefinition.proTypeId"},{fieldLabel:"流程的名称",name:"proDefinition.name"},{fieldLabel:"描述",xtype:"textarea",name:"proDefinition.description"},{fieldLabel:"流程定义的XML",name:"proDefinition.defXml",xtype:"textarea",height:200}]});var a=(this.defId==null||this.defId=="undefined")?"":this.defId;var e=(this.typeId==null||this.typeId=="undefined")?"":this.typeId;b.loadData({url:__ctxPath+"/flow/getProDefinition.do?defId="+a+"&proTypeId="+e,root:"data",preName:"proDefinition",success:function(g,i){var f=Ext.util.JSON.decode(g.responseText);if(f){var h=f.data.proType;if(h!=null){Ext.getCmp("proTypeTreeSelector").setValue(h.typeName);Ext.getCmp("proTypeId").setValue(h.typeId);}}}});return b;};